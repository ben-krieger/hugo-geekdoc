{{ if default true .Site.Params.GeekdocSearch }}
  <script defer src="{{ index (index .Site.Data.assets "search.js") "src" | relURL }}"></script>
  {{- $searchConfigFile := printf "search/%s.config.json" .Language.Lang -}}
  {{- $searchConfig := resources.Get "search/config.json" | resources.ExecuteAsTemplate $searchConfigFile . | resources.Minify -}}
  {{- $searchConfig.Publish -}}
{{ end }}

<!-- Include mermaid if not already included by a shortcode but a mermaid code fence is present -->
{{ if and (findRE "[\n^]```mermaid[\n ]" .RawContent) (not (.Scratch.Get "mermaid")) }}
  <script defer src="{{ index (index .Site.Data.assets "mermaid.js") "src" | relURL }}"></script>
{{ end }}
